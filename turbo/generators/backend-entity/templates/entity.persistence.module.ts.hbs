import { Module } from '@nestjs/common';
import { MongooseModule } from '@nestjs/mongoose';
import { DatabaseCollection } from '@packages/common';
import { Persistence } from 'decorators';
import { {{ constantCase name }}_REPOSITORY } from 'modules/persistence/{{ dashCase name }}/{{ dashCase name }}.repository';
import { {{ pascalCase name }}RepositoryImpl } from 'modules/persistence/{{ dashCase name }}/impl/{{ dashCase name }}.repository.impl';
import { {{ pascalCase name }}Entity, {{ pascalCase name }}Schema } from 'schemas';

@Persistence(DatabaseCollection.{{ collection }})
@Module({
  imports: [MongooseModule.forFeature([{ name: {{ pascalCase name }}Entity.name, schema: {{ pascalCase name }}Schema }])],
  providers: [
    {
      provide: {{ constantCase name }}_REPOSITORY,
      useClass: {{ pascalCase name }}RepositoryImpl,
    },
  ],
  exports: [{{ constantCase name }}_REPOSITORY],
})
export class {{ pascalCase name }}PersistenceModule {}
